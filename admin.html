<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin ‚Äî Portfolio</title>
  <link rel="stylesheet" href="css.css" />
</head>
<body>
  <div class="bg"><div class="blob b1"></div><div class="blob b2"></div></div>

  <main class="wrap" style="max-width:760px">
    <section class="card" style="flex-direction:column;align-items:stretch">
      <h2 class="section-title">üîê Espace Administrateur</h2>

      <div id="loginBlock">
        <input id="pwd" type="password" placeholder="Entrez le mot de passe" style="padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;margin-bottom:12px">
        <div style="display:flex;gap:10px">
          <button class="btn" onclick="login()">Se connecter</button>
          <button class="btn ghost" onclick="location.href='index.html'">Retour</button>
        </div>
      </div>

      <div id="adminPanel" style="display:none;margin-top:18px">
        <h3>‚ûï Ajouter un projet 3D</h3>

        <input id="title" placeholder="Titre du projet" style="width:100%;padding:10px;margin:6px 0;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit">
        <input id="desc" placeholder="Courte description" style="width:100%;padding:10px;margin:6px 0;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit">
        
        <div style="margin:12px 0">
          <strong>Choisissez un mod√®le 3D:</strong>
          <select id="modelType" style="width:100%;padding:10px;margin:6px 0;border-radius:8px;background:rgba(255,255,255,0.05);color:inherit;border:1px solid rgba(255,255,255,0.1)">
            <option value="cube">Cube Simple</option>
            <option value="sphere">Sph√®re</option>
            <option value="cone">C√¥ne</option>
            <option value="torus">Tore (Donut)</option>
            <option value="monkey">Suzanne (Singe)</option>
          </select>
        </div>

        <div style="background:rgba(124,77,255,0.1);padding:15px;border-radius:8px;margin:15px 0;">
          <strong>üéØ Test Imm√©diat</strong>
          <p style="margin:8px 0;font-size:0.9rem;">Le mod√®le 3D appara√Ætra instantan√©ment sur la page d'accueil</p>
        </div>

        <div style="display:flex;gap:10px;margin-top:10px">
          <button class="btn" onclick="addProject()">Ajouter le Projet 3D</button>
          <button class="btn ghost" onclick="clearAll()">Tout Supprimer</button>
          <button class="btn ghost" onclick="logout()">D√©connexion</button>
        </div>

        <h3 style="margin-top:18px">Projets 3D Actuels</h3>
        <div id="currentList" style="margin-top:10px"></div>
      </div>
    </section>
  </main>

  <script>
    const PASSWORD = 'manar2025';

    function login(){
      const v = document.getElementById('pwd').value;
      if(v === PASSWORD){
        document.getElementById('loginBlock').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
        renderList();
      } else alert('Mot de passe incorrect !');
    }

    function logout(){
      document.getElementById('pwd').value = '';
      document.getElementById('loginBlock').style.display = 'block';
      document.getElementById('adminPanel').style.display = 'none';
    }

    function addProject(){
      const title = document.getElementById('title').value.trim();
      const desc = document.getElementById('desc').value.trim();
      const modelType = document.getElementById('modelType').value;
      
      if(!title || !desc){ 
        alert('Remplis le titre et la description !'); 
        return; 
      }

      const projectData = { 
        title, 
        desc, 
        type: '3d',
        modelType: modelType
      };

      let arr = [];
      try {
        arr = JSON.parse(localStorage.getItem('projects3d')) || [];
      } catch(e){
        arr = [];
      }

      arr.unshift(projectData);
      localStorage.setItem('projects3d', JSON.stringify(arr));

      document.getElementById('title').value = '';
      document.getElementById('desc').value = '';
      
      renderList();
      alert('Projet 3D ajout√© ‚úÖ');
    }

    function renderList(){
      const list = document.getElementById('currentList');
      let arr = [];
      try {
        arr = JSON.parse(localStorage.getItem('projects3d')) || [];
      } catch(e){
        arr = [];
      }
      
      if(arr.length === 0){
        list.innerHTML = '<p class="muted">Aucun projet 3D enregistr√©.</p>';
        return;
      }
      
      list.innerHTML = arr.map((p,idx)=>`
        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:10px;border:1px solid rgba(124,77,255,0.1)">
          <div style="flex:1">
            <strong>${p.title}</strong>
            <div class="muted" style="font-size:0.9rem">${p.desc}</div>
            <div style="font-size:0.8rem;color:#7c4dff">üéÆ Mod√®le: ${p.modelType}</div>
          </div>
          <button class="btn ghost" onclick="removeAt(${idx})" style="padding:6px 12px">Suppr</button>
        </div>
      `).join('');
    }

    function removeAt(i){
      let arr = [];
      try { arr = JSON.parse(localStorage.getItem('projects3d')) || []; } catch(e){ arr = []; }
      if(!arr[i]) return;
      if(!confirm('Supprimer ce projet 3D ?')) return;
      
      arr.splice(i,1);
      localStorage.setItem('projects3d', JSON.stringify(arr));
      renderList();
    }

    function clearAll(){
      if(!confirm('Supprimer tous les projets 3D ?')) return;
      localStorage.removeItem('projects3d');
      renderList();
      alert('Tous les projets 3D supprim√©s.');
    }
  </script>
</body>
</html>
